{"ast":null,"code":"var _jsxFileName = \"/Users/keremguventurk/Desktop/northwestern/winter2020/bme390-2/Self-Service-Database-UI/src/views/PatientsPage.jsx\";\n\n/*!\n\n=========================================================\n* Light Bootstrap Dashboard React - v1.3.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/light-bootstrap-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/light-bootstrap-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\n//This is the page that appears after submitting the filters page, containing patient cohort information\n//Feb. 4, 2020 added comments and fixed systemtic diagnosis bug\n//Feb. 10, 2020 added show and hide demonstration buttons. Not sure if it is helpful?\nimport React, { Component } from \"react\";\nimport { Grid, Row, Col, Table } from \"react-bootstrap\";\nimport CustomButton from \"components/CustomButton/CustomButton\";\nimport TableList from \"./TableList.jsx\";\nimport { apiBaseURL } from \"./Dashboard.jsx\";\nimport { isArray } from \"util\";\n\nconst axios = require(\"axios\");\n\nconst frontendToBackend = {\n  \"Eye Diagnosis\": \"eye_diagnosis\",\n  \"Systemic Diagnosis\": \"systemic_diagnosis\",\n  Age: \"age\",\n  Ethnicity: \"ethnicity\",\n  \"Image Procedure Type\": \"image_procedure_type\",\n  Labs: \"labs\",\n  \"Medication Generic Name\": \"medication_generic_name\",\n  \"Medication Therapuetic Name\": \"medication_therapuetic_name\",\n  \"Left Vision\": \"left_vision\",\n  \"Right Vision\": \"right_vision\",\n  \"Left Pressure\": \"left_pressure\",\n  \"Right Pressure\": \"right_pressure\",\n  \"Patient ID\": \"pt_id\"\n};\n\nfunction isDict(v) {\n  return typeof v === \"object\" && v !== null && !(v instanceof Array) && !(v instanceof Date);\n} //Variables\n//patientsIDs: A list of relevant patient IDs based on the filters\n//patientInfo: Information for each patient obtained from the API\n//filterCategories: The fitler categories that will appear on the table in the patients page (always have patient ID, also images is pushed in getPatients() function below)\n//tableKey:\n//exportPressed: determines whether the export details are shown (incl. export checkboxes) or not (just one single button)\n\n\nclass PatientsPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      patientsIDs: [],\n      patientInfo: [],\n      filterCategories: [\"Patient ID\"],\n      selectedFilterCategories: [],\n      tableKey: 1,\n      displayedMessage: \"\",\n      exportPressed: {\n        display: false\n      }\n    };\n    this._calculateAge = this._calculateAge.bind(this);\n    this.getPatients = this.getPatients.bind(this);\n    this.getData = this.getData.bind(this);\n    this.editData = this.editData.bind(this);\n    this.getFilters = this.getFilters.bind(this);\n    this.categoryFilterPressed = this.categoryFilterPressed.bind(this);\n    this.getTable = this.getTable.bind(this);\n    this.backButtonPressed = this.backButtonPressed.bind(this);\n    this.examsPagePressed = this.examsPagePressed.bind(this);\n    this.exportAllImagesPressed = this.exportAllImagesPressed.bind(this);\n    this.getExport = this.getExport.bind(this);\n    this.exportCategoryPressed = this.exportCategoryPressed.bind(this);\n    this.exportImagesPressed = this.exportImagesPressed.bind(this);\n    this.getFilterSummary = this.getFilterSummary.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPatients();\n  } //calculates and returns the age age_now from date of birth dob1\n\n\n  _calculateAge(dob1) {\n    var today = new Date();\n    var birthDate = new Date(dob1); // create a date object directly from `dob1` argument\n\n    var age_now = today.getFullYear() - birthDate.getFullYear();\n    var m = today.getMonth() - birthDate.getMonth();\n\n    if (m < 0 || m === 0 && today.getDate() < birthDate.getDate()) {\n      age_now--;\n    }\n\n    return age_now;\n  } //sets up the state of filterCategories, also sets up the state of patientIDs (see around line 118)\n\n\n  getPatients() {\n    let data = this.props.pageStatus.PatientsPage; //see submitButtonPressed() for additionalInfo\n\n    let temp_data = {};\n    let tempFilterCategories = this.state[\"filterCategories\"];\n\n    for (var key in data) {\n      var tempValue = data[key];\n\n      if (isDict(tempValue)) {\n        var tempDict = {};\n\n        for (var innerKey in tempValue) {\n          try {\n            var tempNumber = tempValue[innerKey];\n\n            if (tempNumber.search(\"/\") !== -1) {\n              if (innerKey === \"equal\") {\n                tempDict[\"less\"] = tempNumber.substring(0, tempNumber.length - 2) + (parseInt(tempNumber.substring(tempNumber.length - 2, tempNumber.length)) + 1);\n                tempDict[\"more\"] = tempNumber.substring(0, tempNumber.length - 2) + (parseInt(tempNumber.substring(tempNumber.length - 2, tempNumber.length)) - 1);\n              } else if (innerKey === \"between less\") {\n                tempDict[\"more\"] = tempNumber;\n              } else if (innerKey === \"between greater\") {\n                tempDict[\"less\"] = tempNumber;\n              } else if (innerKey === \"greater\") {\n                tempDict[\"more\"] = tempNumber;\n              } else {\n                tempDict[innerKey] = tempNumber;\n              }\n            } else {\n              tempNumber = parseInt(tempNumber);\n\n              if (innerKey === \"equal\") {\n                tempDict[\"less\"] = tempNumber + 1;\n                tempDict[\"more\"] = tempNumber - 1;\n              } else if (innerKey === \"between less\") {\n                tempDict[\"more\"] = tempNumber;\n              } else if (innerKey === \"between greater\") {\n                tempDict[\"less\"] = tempNumber;\n              } else if (innerKey === \"greater\") {\n                tempDict[\"more\"] = tempNumber;\n              } else {\n                tempDict[innerKey] = tempNumber;\n              }\n            }\n          } catch (e) {\n            tempDict[innerKey] = tempValue[innerKey];\n          }\n        }\n\n        tempValue = tempDict;\n      }\n\n      temp_data[frontendToBackend[key]] = tempValue; //frontendToBackend is a dictionary, defined towards the top of this file\n\n      tempFilterCategories.push(key);\n    }\n\n    tempFilterCategories.push(\"Images\");\n    let currentComponent = this;\n    var autToken = \"Basic \" + btoa(this.props.accessToken + \":something\");\n    const options = {\n      url: apiBaseURL + \"/ssd_api/filter\",\n      method: 'post',\n      headers: {\n        'Authorization': autToken\n      },\n      data: {\n        filters: temp_data\n      }\n    };\n    axios(options).then(function (response) {\n      currentComponent.setState({\n        patientsIDs: response.data.result.pt_id\n      }, () => {\n        currentComponent.getData();\n      });\n    }).catch(function (error) {\n      console.log(error, error === \"Error: Request failed with status code 401\");\n    });\n    this.setState({\n      filterCategories: tempFilterCategories,\n      selectedFilterCategories: tempFilterCategories\n    });\n  } //sets this.state.patientInfo to what is obtained from the API\n\n\n  getData() {\n    let currentComponent = this;\n    let patientIDs = this.state.patientsIDs;\n\n    for (var index in patientIDs) {\n      var patientID = patientIDs[index];\n      let link = apiBaseURL + \"/ssd_api/patients?pt_id=\" + patientID.toString();\n      var autToken = \"Basic \" + btoa(this.props.accessToken + \":something\");\n      var options = {\n        url: link,\n        method: 'get',\n        headers: {\n          'Authorization': autToken\n        }\n      };\n      axios(options).then(function (response) {\n        let currentInfo = currentComponent.state.patientInfo;\n        currentInfo.push(response.data.result);\n        currentComponent.setState({\n          patientInfo: currentInfo\n        }, () => {\n          currentComponent.editData();\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      link = apiBaseURL + \"/ssd_api/filter_table_with_ptid?pt_id=\" + patientID.toString() + \"&table_name=pt_deid\";\n      options = {\n        url: link,\n        method: 'get',\n        headers: {\n          'Authorization': autToken\n        }\n      };\n      axios(options).then(function (response) {\n        let currentInfo = currentComponent.state.patientInfo;\n        currentInfo.push(response.data.result);\n        currentComponent.setState({\n          patientInfo: currentInfo\n        }, () => {\n          currentComponent.editData();\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  } //Obtains the filter categories used, including the CustomButton styling, for the left side of the page\n\n\n  getFilters() {\n    var filter_categories = this.state.filterCategories;\n    var temp_filter_categories = [];\n\n    for (var i = 0; i < filter_categories.length; i++) {\n      var category_name = filter_categories[i];\n      var temp_filter_category = null;\n\n      if (this.state.selectedFilterCategories.indexOf(category_name) !== -1) {\n        temp_filter_category = React.createElement(CustomButton, {\n          style: styles.buttonDivPressed,\n          title: category_name,\n          onClick: e => this.categoryFilterPressed(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, \" \", category_name, \" \");\n      } else {\n        temp_filter_category = React.createElement(CustomButton, {\n          style: styles.buttonDiv,\n          title: category_name,\n          onClick: e => this.categoryFilterPressed(e),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, \" \", category_name, \" \");\n      }\n\n      temp_filter_categories.push(temp_filter_category);\n    }\n\n    return temp_filter_categories;\n  }\n\n  editData() {\n    if (this.state.patientsIDs.length * 2 !== this.state.patientInfo.length) {\n      return;\n    }\n\n    let patientInfo = {};\n\n    for (var i = 0; i < this.state.patientInfo.length; i++) {\n      let patient = this.state.patientInfo[i];\n      let key_list = Object.keys(patient);\n\n      if (key_list[0] !== \"data\") {\n        patientInfo[key_list[0]] = patient[key_list[0]];\n      }\n    }\n\n    for (var j = 0; j < this.state.patientInfo.length; j++) {\n      let patient = this.state.patientInfo[j];\n      let key_list = Object.keys(patient);\n\n      if (key_list[0] === \"data\") {\n        var patientPersonal = patient.data[0];\n        var patientID = patientPersonal.pt_id;\n        var ethnicity = patientPersonal.race_1;\n\n        var age = this._calculateAge(patientPersonal.dob);\n\n        patientInfo[patientID][\"ethnicity\"] = ethnicity;\n        patientInfo[patientID][\"age\"] = age;\n      }\n    }\n\n    this.setState({\n      patientInfo: patientInfo,\n      loaded: \"true\"\n    });\n  } //Loops through each category to create the relevant table info for patient history page\n  //Outside loop goes through each patient ID\n  //Inside loop goes through each filter category of each patient ID\n\n\n  getTable() {\n    var nullTable = React.createElement(Col, {\n      style: styles.titleText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \" No Patient Satisfies This Criteria \"));\n\n    if (!this.state.loaded) {\n      return nullTable;\n    }\n\n    let patientInfo = this.state.patientInfo;\n    let categoryTitles = [];\n    let tableData = [];\n\n    for (var i = 0; i < this.state.patientsIDs.length; i++) {\n      let patientID = this.state.patientsIDs[i];\n      let tempPatientInfo = [];\n\n      for (var j = 0; j < this.state.filterCategories.length; j++) {\n        let category = this.state.filterCategories[j];\n\n        if (this.state.selectedFilterCategories.indexOf(category) !== -1) {\n          //if the category is one of the selected, then run this block\n          var value = {};\n\n          if (categoryTitles.indexOf(category) === -1) {\n            categoryTitles.push(category);\n          } //If the patient ID number is pressed, jump to the PatientHistoryPage with the given patientID\n\n\n          if (category === \"Patient ID\") {\n            value[\"type\"] = \"button\";\n            value[\"text\"] = patientID;\n            var tempPageStatus = {};\n            Object.assign(tempPageStatus, this.props.pageStatus);\n            tempPageStatus[\"PatientHistoryPage\"] = {\n              patientID: patientID,\n              patientInfo: patientInfo[patientID]\n            };\n            let newState = {\n              page: \"PatientHistoryPage\",\n              pageStatus: tempPageStatus\n            };\n\n            value[\"submitFunction\"] = newState => this.props.changePage(newState);\n\n            value[\"submitInformation\"] = newState;\n            tempPatientInfo.push(value);\n          } //If images is pressed, jump to the PatientImagesPage\n          else if (category === \"Images\") {\n              value[\"type\"] = \"button\";\n              value[\"text\"] = \"See Images\";\n              var tempPageStatus = {};\n              Object.assign(tempPageStatus, this.props.pageStatus);\n              tempPageStatus[\"PatientImagesPage\"] = {\n                patientID: patientID\n              };\n              let newState = {\n                page: \"PatientImagesPage\",\n                pageStatus: tempPageStatus\n              };\n\n              value[\"submitFunction\"] = newState => this.props.changePage(newState);\n\n              value[\"submitInformation\"] = newState;\n              tempPatientInfo.push(value);\n            } else {\n              var tempCategory = frontendToBackend[category];\n\n              if (category === \"Image Procedure Type\") {\n                tempCategory = \"image_type\";\n              }\n\n              var tempValue = patientInfo[patientID][tempCategory];\n              var text = [];\n\n              if (tempCategory === \"left_vision\" || tempCategory === \"right_vision\") {\n                console.log(patientInfo[patientID]);\n                var tempData = patientInfo[patientID][\"vision\"];\n                var searchWord = \"LEFT\";\n\n                if (tempCategory === \"right_vision\") {\n                  searchWord = \"RIGHT\";\n                }\n\n                for (var index = 0; index < tempData.length; index++) {\n                  var tempVision = tempData[index];\n\n                  if (tempVision.name.search(searchWord) !== -1) {\n                    text.push(tempVision.date.substring(0, 16) + \": \" + tempVision.value);\n                    text.push(React.createElement(\"br\", {\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 416\n                      },\n                      __self: this\n                    }));\n                  }\n                }\n              } else if (isDict(tempValue)) {\n                for (var key in tempValue) {\n                  if (tempValue[key] == null) {\n                    text.push(key);\n                  } else {\n                    text.push(key + \" (\" + tempValue[key].substring(0, 16) + \")\"); // e.g. key is the diagnosis, and tempValue[key] displays the date\n                  }\n\n                  text.push(React.createElement(\"br\", {\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 427\n                    },\n                    __self: this\n                  }));\n                }\n              } else if (isArray(tempValue)) {\n                for (var index = 0; index < tempValue.length; index++) {\n                  if (index % 4 === 3) {\n                    text.push(tempValue[index]);\n                    text.push(React.createElement(\"br\", {\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 434\n                      },\n                      __self: this\n                    }));\n                  } else if (index === tempValue.length - 1) {\n                    text.push(tempValue[index]);\n                  } else {\n                    text.push(tempValue[index] + \", \");\n                  }\n                }\n              } else {\n                text = tempValue;\n              }\n\n              value[\"type\"] = \"string\";\n              value[\"text\"] = text;\n              tempPatientInfo.push(value);\n            }\n        }\n      }\n\n      tableData.push(tempPatientInfo);\n    }\n\n    console.log(\"tableData\", tableData);\n\n    if (tableData.length === 0) {\n      return nullTable;\n    }\n\n    return React.createElement(TableList, {\n      key: this.state.tableKey,\n      columns: categoryTitles,\n      rows: tableData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465\n      },\n      __self: this\n    });\n  } //If the category filter pressed doesn't exist (first if), then push to selectedFilterCategories, otherwise remain the same\n\n\n  categoryFilterPressed(e) {\n    let category = e.target.title;\n\n    if (this.state.selectedFilterCategories.indexOf(category) === -1) {\n      this.state.selectedFilterCategories.push(category);\n      this.setState({\n        selectedFilterCategories: this.state.selectedFilterCategories,\n        tableKey: this.state.tableKey + 1\n      });\n    } else {\n      var new_list = this.state.selectedFilterCategories.filter(function (name) {\n        return name !== category;\n      });\n      this.setState({\n        selectedFilterCategories: new_list,\n        tableKey: this.state.tableKey + 1\n      });\n    }\n  } //When the back button is pressed, jump to the original filter page while maintaing additionalInfo (stuff relating to the filters the user submitted, retaining \"memory\")\n\n\n  backButtonPressed() {\n    let newState = {\n      page: \"FilterPage\",\n      additionalInfo: this.props.additionalInfo\n    };\n    this.props.changePage(newState);\n  } //When the see all exams button is pressed, jump to the exams page while maintaining the info from patients page and filter page\n\n\n  examsPagePressed() {\n    var tempPageStatus = this.props.pageStatus;\n    tempPageStatus[\"ExamsPage\"] = {\n      patientsIDs: this.state.patientsIDs\n    };\n    let newState = {\n      page: \"ExamsPage\",\n      pageStatus: tempPageStatus\n    };\n    this.props.changePage(newState);\n  } //used in the getExport() function to set the state of \"exportPressed\"\n\n\n  exportAllImagesPressed() {\n    this.setState({\n      exportPressed: {\n        display: !this.state.exportPressed.display\n      }\n    });\n  } //If the cateogry is pressed, then if it was not already pressed, set state to true. Otherwise also set state to true.\n\n\n  exportCategoryPressed(e) {\n    let category = e.target.title;\n\n    if (this.state.exportPressed[category]) {\n      this.setState({\n        exportPressed: {\n          [category]: !this.state.exportPressed.display,\n          display: true\n        }\n      });\n    } else {\n      this.setState({\n        exportPressed: {\n          [category]: true,\n          display: true\n        }\n      });\n    }\n  }\n\n  exportImagesPressed() {\n    //code for exporting all images\n    return null;\n  } //If the export button is pressed, then display the checkboxes with patient ID, diagnosis, image procedure; otherwise, don't display those\n\n\n  getExport() {\n    if (!this.state.exportPressed.display) {\n      return React.createElement(CustomButton, {\n        style: styles.buttonUpperExport,\n        onClick: () => this.exportAllImagesPressed(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, \"EXPORT ALL IMAGES\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 562\n      },\n      __self: this\n    }, React.createElement(CustomButton, {\n      style: styles.buttonUpperExport,\n      onClick: () => this.exportAllImagesPressed(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563\n      },\n      __self: this\n    }, \"EXPORT ALL IMAGES\"), React.createElement(\"div\", {\n      style: styles.exportDropdownPressed,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      title: \"by Patient ID\",\n      onChange: e => this.exportCategoryPressed(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571\n      },\n      __self: this\n    }), \"by Patient ID\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      title: \"by diagnosis\",\n      onChange: e => this.exportCategoryPressed(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579\n      },\n      __self: this\n    }), \"by diagnosis\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      title: \"by image procedure\",\n      onChange: e => this.exportCategoryPressed(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587\n      },\n      __self: this\n    }), \"by image procedure\")), React.createElement(CustomButton, {\n      style: styles.buttonUpperExport,\n      onClick: () => this.exportImagesPressed(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595\n      },\n      __self: this\n    }, \"EXPORT IMAGES\"));\n  } //template function that creates legend\n\n\n  createLegend(json) {\n    var legend = [];\n\n    for (var i = 0; i < json[\"names\"].length; i++) {\n      var type = \"fa fa-circle text-\" + json[\"types\"][i];\n      legend.push(React.createElement(\"i\", {\n        className: type,\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      }));\n      legend.push(\" \");\n      legend.push(json[\"names\"][i]);\n    }\n\n    return legend;\n  } //returns a text of chosen filters to display above table\n\n\n  getFilterSummary() {\n    var selectedFilters = this.props.pageStatus.FilterPage;\n    var text = [];\n    text.push(React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621\n      },\n      __self: this\n    }, \"You have selected these filters:\"));\n    text.push(React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622\n      },\n      __self: this\n    }));\n\n    for (var key in selectedFilters) {\n      var title = key;\n      var tempText = \": \";\n      var tempArray = selectedFilters[key];\n\n      if (isDict(tempArray)) {\n        tempArray = Object.keys(tempArray);\n      }\n\n      for (var index = 0; index < tempArray.length; index++) {\n        if (index !== 0) {\n          tempText += \", \";\n        }\n\n        if (isDict(selectedFilters[key])) {\n          tempText += tempArray[index] + \": \" + selectedFilters[key][tempArray[index]];\n        } else {\n          tempText += tempArray[index];\n        }\n      }\n\n      text.push(React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, React.createElement(\"u\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643\n        },\n        __self: this\n      }, title)));\n      text.push(tempText);\n      text.push(React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647\n        },\n        __self: this\n      }));\n    }\n\n    return text;\n  } //render displays what is shown on the webpage\n\n\n  render() {\n    console.log(\"state\", this.state);\n    var filterSummary = this.getFilterSummary();\n    var all_filters = this.getFilters();\n    var exportButton = this.getExport();\n    var table = this.getTable();\n    return React.createElement(\"div\", {\n      style: styles.container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 661\n      },\n      __self: this\n    }, React.createElement(Row, {\n      style: styles.titleStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 662\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: styles.titleText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 663\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 664\n      },\n      __self: this\n    }, \"Your Patient Cohort\"))), React.createElement(Row, {\n      style: styles.summaryStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 668\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: styles.summaryText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 670\n      },\n      __self: this\n    }, filterSummary))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 674\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 3,\n      style: styles.sideDivStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 675\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 676\n      },\n      __self: this\n    }, React.createElement(CustomButton, {\n      style: styles.buttonDivShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 677\n      },\n      __self: this\n    }, \" \", \"Shown\", \" \"), React.createElement(CustomButton, {\n      style: styles.buttonDivHide,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 681\n      },\n      __self: this\n    }, \" \", \"Hidden\", \" \")), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686\n      },\n      __self: this\n    }, all_filters)), React.createElement(Col, {\n      sm: 9,\n      style: styles.mainDivStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 688\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 690\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: styles.tableStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 691\n      },\n      __self: this\n    }, table), React.createElement(\"div\", {\n      style: styles.displayedMessageStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 692\n      },\n      __self: this\n    }, this.state.displayedMessage), React.createElement(\"div\", {\n      style: styles.underMainStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 695\n      },\n      __self: this\n    }, React.createElement(CustomButton, {\n      style: styles.buttonUpperSubmit,\n      onClick: () => this.backButtonPressed(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696\n      },\n      __self: this\n    }, \"BACK TO FILTERS PAGE\"), React.createElement(CustomButton, {\n      style: styles.buttonUpperReset,\n      onClick: () => this.examsPagePressed(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 702\n      },\n      __self: this\n    }, \"GO TO EXAMS PAGE\"), exportButton)))))));\n  }\n\n}\n\nexport default PatientsPage;\nconst styles = {\n  titleStyle: {\n    height: \"10vh\"\n  },\n  titleText: {\n    display: \"flex\",\n    \"align-items\": \"center\",\n    \"justify-content\": \"center\",\n    \"font-weight\": \"bold\",\n    \"font-size\": \"30px\"\n  },\n  summaryStyle: {\n    \"margin-bottom\": \"2vh\"\n  },\n  summaryText: {\n    display: \"flex\",\n    \"align-items\": \"flex-start\",\n    \"justify-content\": \"center\",\n    \"margin-bottom\": \"2.1vh\"\n  },\n  buttonDiv: {\n    width: \"100%\",\n    margin: \"1vh\",\n    \"background-color\": \"white\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  buttonDivPressed: {\n    width: \"100%\",\n    margin: \"1vh\",\n    \"background-color\": \"#78deec\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  buttonDivHide: {\n    width: \"45%\",\n    \"margin-top\": \"1vh\",\n    \"margin-bottom\": \"1vh\",\n    \"margin-left\": \"2vh\",\n    \"background-color\": \"white\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  buttonDivShow: {\n    width: \"45%\",\n    margin: \"1vh\",\n    \"background-color\": \"#78deec\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  mainDivCategoryStyle: {\n    height: \"20vh\",\n    overflow: \"scroll\",\n    border: \"solid 2px black\",\n    margin: \"1vh\"\n  },\n  mainDivButtonTitle: {\n    display: \"flex\",\n    \"justify-content\": \"center\",\n    \"font-weight\": \"bold\",\n    \"text-decoration\": \"underline\"\n  },\n  underMainStyle: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n    \"justify-content\": \"flex-end\",\n    \"align-items\": \"flex-end\",\n    \"padding-right\": \"2vh\"\n  },\n  buttonUpperSubmit: {\n    width: \"40vh\",\n    color: \"black\",\n    border: \"solid 2px black\",\n    \"font-weight\": \"bold\",\n    \"background-color\": \"#eef27c\"\n  },\n  buttonUpperReset: {\n    width: \"40vh\",\n    color: \"black\",\n    border: \"solid 2px black\",\n    \"font-weight\": \"bold\",\n    \"background-color\": \"#eef27c\",\n    \"margin-top\": \"1vh\"\n  },\n  buttonUpperExport: {\n    width: \"40vh\",\n    color: \"black\",\n    border: \"solid 2px black\",\n    \"font-weight\": \"bold\",\n    \"background-color\": \"#eef27c\",\n    \"margin-top\": \"1vh\",\n    \"margin-bottom\": \"1vh\"\n  },\n  displayedMessageStyle: {\n    display: \"flex\",\n    \"justify-content\": \"flex-start\",\n    color: \"black\",\n    \"font-size\": \"16px\",\n    \"font-weight\": \"bold\",\n    \"margin-left\": \"3%\"\n  }\n};","map":{"version":3,"sources":["/Users/keremguventurk/Desktop/northwestern/winter2020/bme390-2/Self-Service-Database-UI/src/views/PatientsPage.jsx"],"names":["React","Component","Grid","Row","Col","Table","CustomButton","TableList","apiBaseURL","isArray","axios","require","frontendToBackend","Age","Ethnicity","Labs","isDict","v","Array","Date","PatientsPage","constructor","props","state","patientsIDs","patientInfo","filterCategories","selectedFilterCategories","tableKey","displayedMessage","exportPressed","display","_calculateAge","bind","getPatients","getData","editData","getFilters","categoryFilterPressed","getTable","backButtonPressed","examsPagePressed","exportAllImagesPressed","getExport","exportCategoryPressed","exportImagesPressed","getFilterSummary","componentDidMount","dob1","today","birthDate","age_now","getFullYear","m","getMonth","getDate","data","pageStatus","temp_data","tempFilterCategories","key","tempValue","tempDict","innerKey","tempNumber","search","substring","length","parseInt","e","push","currentComponent","autToken","btoa","accessToken","options","url","method","headers","filters","then","response","setState","result","pt_id","catch","error","console","log","patientIDs","index","patientID","link","toString","currentInfo","filter_categories","temp_filter_categories","i","category_name","temp_filter_category","indexOf","styles","buttonDivPressed","buttonDiv","patient","key_list","Object","keys","j","patientPersonal","ethnicity","race_1","age","dob","loaded","nullTable","titleText","categoryTitles","tableData","tempPatientInfo","category","value","tempPageStatus","assign","newState","page","changePage","tempCategory","text","tempData","searchWord","tempVision","name","date","target","title","new_list","filter","additionalInfo","buttonUpperExport","exportDropdownPressed","createLegend","json","legend","type","selectedFilters","FilterPage","tempText","tempArray","render","filterSummary","all_filters","exportButton","table","container","titleStyle","summaryStyle","summaryText","sideDivStyle","buttonDivShow","buttonDivHide","mainDivStyle","tableStyle","displayedMessageStyle","underMainStyle","buttonUpperSubmit","buttonUpperReset","height","width","margin","color","border","mainDivCategoryStyle","overflow","mainDivButtonTitle"],"mappings":"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","sourcesContent":["/*!\n\n=========================================================\n* Light Bootstrap Dashboard React - v1.3.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/light-bootstrap-dashboard-react\n* Copyright 2019 Creative Tim (https://www.creative-tim.com)\n* Licensed under MIT (https://github.com/creativetimofficial/light-bootstrap-dashboard-react/blob/master/LICENSE.md)\n\n* Coded by Creative Tim\n\n=========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n*/\n\n//This is the page that appears after submitting the filters page, containing patient cohort information\n//Feb. 4, 2020 added comments and fixed systemtic diagnosis bug\n//Feb. 10, 2020 added show and hide demonstration buttons. Not sure if it is helpful?\n\nimport React, { Component } from \"react\";\nimport { Grid, Row, Col, Table } from \"react-bootstrap\";\nimport CustomButton from \"components/CustomButton/CustomButton\";\nimport TableList from \"./TableList.jsx\";\n\nimport { apiBaseURL } from \"./Dashboard.jsx\";\nimport { isArray } from \"util\";\n\nconst axios = require(\"axios\");\n\nconst frontendToBackend = {\n  \"Eye Diagnosis\": \"eye_diagnosis\",\n  \"Systemic Diagnosis\": \"systemic_diagnosis\",\n  Age: \"age\",\n  Ethnicity: \"ethnicity\",\n  \"Image Procedure Type\": \"image_procedure_type\",\n  Labs: \"labs\",\n  \"Medication Generic Name\": \"medication_generic_name\",\n  \"Medication Therapuetic Name\": \"medication_therapuetic_name\",\n  \"Left Vision\": \"left_vision\",\n  \"Right Vision\": \"right_vision\",\n  \"Left Pressure\": \"left_pressure\",\n  \"Right Pressure\": \"right_pressure\",\n  \"Patient ID\": \"pt_id\"\n};\n\nfunction isDict(v) {\n  return (\n    typeof v === \"object\" &&\n    v !== null &&\n    !(v instanceof Array) &&\n    !(v instanceof Date)\n  );\n}\n\n//Variables\n//patientsIDs: A list of relevant patient IDs based on the filters\n//patientInfo: Information for each patient obtained from the API\n//filterCategories: The fitler categories that will appear on the table in the patients page (always have patient ID, also images is pushed in getPatients() function below)\n//tableKey:\n//exportPressed: determines whether the export details are shown (incl. export checkboxes) or not (just one single button)\nclass PatientsPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      patientsIDs: [],\n      patientInfo: [],\n      filterCategories: [\"Patient ID\"],\n      selectedFilterCategories: [],\n      tableKey: 1,\n      displayedMessage: \"\",\n      exportPressed: {\n        display: false\n      }\n    };\n    this._calculateAge = this._calculateAge.bind(this);\n    this.getPatients = this.getPatients.bind(this);\n    this.getData = this.getData.bind(this);\n    this.editData = this.editData.bind(this);\n    this.getFilters = this.getFilters.bind(this);\n    this.categoryFilterPressed = this.categoryFilterPressed.bind(this);\n    this.getTable = this.getTable.bind(this);\n    this.backButtonPressed = this.backButtonPressed.bind(this);\n    this.examsPagePressed = this.examsPagePressed.bind(this);\n    this.exportAllImagesPressed = this.exportAllImagesPressed.bind(this);\n    this.getExport = this.getExport.bind(this);\n    this.exportCategoryPressed = this.exportCategoryPressed.bind(this);\n    this.exportImagesPressed = this.exportImagesPressed.bind(this);\n    this.getFilterSummary = this.getFilterSummary.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPatients();\n  }\n\n  //calculates and returns the age age_now from date of birth dob1\n  _calculateAge(dob1) {\n    var today = new Date();\n    var birthDate = new Date(dob1); // create a date object directly from `dob1` argument\n    var age_now = today.getFullYear() - birthDate.getFullYear();\n    var m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n      age_now--;\n    }\n    return age_now;\n  }\n\n  //sets up the state of filterCategories, also sets up the state of patientIDs (see around line 118)\n  getPatients() {\n    let data = this.props.pageStatus.PatientsPage; //see submitButtonPressed() for additionalInfo\n    let temp_data = {};\n    let tempFilterCategories = this.state[\"filterCategories\"];\n\n    for (var key in data) {\n      var tempValue = data[key]\n      if (isDict(tempValue)) {\n        var tempDict = {}\n        for (var innerKey in tempValue) {\n          try {\n            var tempNumber = tempValue[innerKey]\n            if (tempNumber.search(\"/\") !== -1) {\n              if (innerKey === \"equal\") {\n                tempDict[\"less\"] = tempNumber.substring(0, tempNumber.length - 2) + (parseInt(tempNumber.substring(tempNumber.length - 2, tempNumber.length)) + 1)\n                tempDict[\"more\"] = tempNumber.substring(0, tempNumber.length - 2) + (parseInt(tempNumber.substring(tempNumber.length - 2, tempNumber.length)) - 1)\n              }\n              else if (innerKey === \"between less\") {\n                tempDict[\"more\"] = tempNumber\n              }\n              else if (innerKey === \"between greater\") {\n                tempDict[\"less\"] = tempNumber\n              }\n              else if (innerKey === \"greater\") {\n                tempDict[\"more\"] = tempNumber\n              }\n              else {\n                tempDict[innerKey] = tempNumber\n              }\n            }\n            else {\n              tempNumber = parseInt(tempNumber)\n              if (innerKey === \"equal\") {\n                tempDict[\"less\"] = tempNumber + 1\n                tempDict[\"more\"] = tempNumber - 1\n              }\n              else if (innerKey === \"between less\") {\n                tempDict[\"more\"] = tempNumber\n              }\n              else if (innerKey === \"between greater\") {\n                tempDict[\"less\"] = tempNumber\n              }\n              else if (innerKey === \"greater\") {\n                tempDict[\"more\"] = tempNumber\n              }\n              else {\n                tempDict[innerKey] = tempNumber\n              }\n            }\n          }\n          catch (e) {\n            tempDict[innerKey] = tempValue[innerKey]\n          }\n        }\n        tempValue = tempDict\n      }\n      temp_data[frontendToBackend[key]] = tempValue; //frontendToBackend is a dictionary, defined towards the top of this file\n      tempFilterCategories.push(key);\n    }\n    tempFilterCategories.push(\"Images\");\n\n    let currentComponent = this;\n\n    var autToken = \"Basic \" + btoa(this.props.accessToken + \":something\")\n\n    const options = {\n      url: apiBaseURL + \"/ssd_api/filter\",\n      method: 'post',\n      headers: {\n        'Authorization': autToken\n      },\n      data: {\n        filters: temp_data\n      }\n    };\n    axios(options)\n      .then(function (response) {\n        currentComponent.setState(\n          { patientsIDs: response.data.result.pt_id },\n          () => {\n            currentComponent.getData();\n          }\n        );\n      })\n      .catch(function (error) {\n        console.log(error,error === \"Error: Request failed with status code 401\");\n      });\n\n\n    this.setState({\n      filterCategories: tempFilterCategories,\n      selectedFilterCategories: tempFilterCategories\n    });\n  }\n\n  //sets this.state.patientInfo to what is obtained from the API\n  getData() {\n    let currentComponent = this;\n    let patientIDs = this.state.patientsIDs;\n    for (var index in patientIDs) {\n      var patientID = patientIDs[index];\n      let link = apiBaseURL + \"/ssd_api/patients?pt_id=\" + patientID.toString();\n      var autToken = \"Basic \" + btoa(this.props.accessToken + \":something\")\n\n      var options = {\n        url: link,\n        method: 'get',\n        headers: {\n          'Authorization': autToken\n        },\n      };\n\n      axios(options)\n        .then(function (response) {\n          let currentInfo = currentComponent.state.patientInfo;\n          currentInfo.push(response.data.result);\n          currentComponent.setState({ patientInfo: currentInfo }, () => {\n            currentComponent.editData();\n          });\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n\n      link =\n        apiBaseURL +\n        \"/ssd_api/filter_table_with_ptid?pt_id=\" +\n        patientID.toString() +\n        \"&table_name=pt_deid\";\n\n      options = {\n        url: link,\n        method: 'get',\n        headers: {\n          'Authorization': autToken\n        },\n      };\n      axios(options)\n        .then(function (response) {\n          let currentInfo = currentComponent.state.patientInfo;\n          currentInfo.push(response.data.result);\n          currentComponent.setState({ patientInfo: currentInfo }, () => {\n            currentComponent.editData();\n          });\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n    }\n  }\n\n  //Obtains the filter categories used, including the CustomButton styling, for the left side of the page\n  getFilters() {\n    var filter_categories = this.state.filterCategories;\n    var temp_filter_categories = [];\n\n    for (var i = 0; i < filter_categories.length; i++) {\n      var category_name = filter_categories[i];\n      var temp_filter_category = null;\n      if (this.state.selectedFilterCategories.indexOf(category_name) !== -1) {\n        temp_filter_category = (\n          <CustomButton\n            style={styles.buttonDivPressed}\n            title={category_name}\n            onClick={e => this.categoryFilterPressed(e)}\n          >\n            {\" \"}\n            {category_name}{\" \"}\n          </CustomButton>\n        );\n      } else {\n        temp_filter_category = (\n          <CustomButton\n            style={styles.buttonDiv}\n            title={category_name}\n            onClick={e => this.categoryFilterPressed(e)}\n          >\n            {\" \"}\n            {category_name}{\" \"}\n          </CustomButton>\n        );\n      }\n      temp_filter_categories.push(temp_filter_category);\n    }\n    return temp_filter_categories;\n  }\n\n  editData() {\n\n    if (this.state.patientsIDs.length * 2 !== this.state.patientInfo.length) {\n      return;\n    }\n    let patientInfo = {};\n\n    for (var i = 0; i < this.state.patientInfo.length; i++) {\n      let patient = this.state.patientInfo[i];\n      let key_list = Object.keys(patient);\n      if (key_list[0] !== \"data\") {\n        patientInfo[key_list[0]] = patient[key_list[0]];\n      }\n    }\n\n    for (var j = 0; j < this.state.patientInfo.length; j++) {\n      let patient = this.state.patientInfo[j];\n      let key_list = Object.keys(patient);\n      if (key_list[0] === \"data\") {\n        var patientPersonal = patient.data[0];\n        var patientID = patientPersonal.pt_id;\n        var ethnicity = patientPersonal.race_1;\n        var age = this._calculateAge(patientPersonal.dob);\n        patientInfo[patientID][\"ethnicity\"] = ethnicity;\n        patientInfo[patientID][\"age\"] = age;\n      }\n    }\n    this.setState({\n      patientInfo: patientInfo,\n      loaded: \"true\"\n    });\n  }\n\n  //Loops through each category to create the relevant table info for patient history page\n  //Outside loop goes through each patient ID\n  //Inside loop goes through each filter category of each patient ID\n  getTable() {\n\n    var nullTable =\n      <Col style={styles.titleText}>\n        <div> No Patient Satisfies This Criteria </div>\n      </Col>\n\n    if (!this.state.loaded) {\n      return nullTable;\n\n    }\n\n    let patientInfo = this.state.patientInfo;\n    let categoryTitles = [];\n    let tableData = [];\n    for (var i = 0; i < this.state.patientsIDs.length; i++) {\n      let patientID = this.state.patientsIDs[i];\n      let tempPatientInfo = [];\n      for (var j = 0; j < this.state.filterCategories.length; j++) {\n        let category = this.state.filterCategories[j];\n        if (this.state.selectedFilterCategories.indexOf(category) !== -1) {\n          //if the category is one of the selected, then run this block\n          var value = {};\n          if (categoryTitles.indexOf(category) === -1) {\n            categoryTitles.push(category);\n          }\n          //If the patient ID number is pressed, jump to the PatientHistoryPage with the given patientID\n          if (category === \"Patient ID\") {\n            value[\"type\"] = \"button\";\n            value[\"text\"] = patientID;\n            var tempPageStatus = {}\n            Object.assign(tempPageStatus, this.props.pageStatus)\n            tempPageStatus[\"PatientHistoryPage\"] = {\n              patientID: patientID,\n              patientInfo: patientInfo[patientID]\n            };\n            let newState = {\n              page: \"PatientHistoryPage\",\n              pageStatus: tempPageStatus\n            };\n            value[\"submitFunction\"] = newState =>\n              this.props.changePage(newState);\n            value[\"submitInformation\"] = newState;\n            tempPatientInfo.push(value);\n          }\n          //If images is pressed, jump to the PatientImagesPage\n          else if (category === \"Images\") {\n            value[\"type\"] = \"button\";\n            value[\"text\"] = \"See Images\";\n            var tempPageStatus = {}\n            Object.assign(tempPageStatus, this.props.pageStatus)\n            tempPageStatus[\"PatientImagesPage\"] = {\n              patientID: patientID\n            };\n            let newState = {\n              page: \"PatientImagesPage\",\n              pageStatus: tempPageStatus\n            };\n            value[\"submitFunction\"] = newState =>\n              this.props.changePage(newState);\n            value[\"submitInformation\"] = newState;\n            tempPatientInfo.push(value);\n          }\n          else {\n            var tempCategory = frontendToBackend[category]\n            if (category === \"Image Procedure Type\") {\n              tempCategory = \"image_type\"\n            }\n            var tempValue = patientInfo[patientID][tempCategory];\n            var text = [];\n\n            if (tempCategory === \"left_vision\" || tempCategory === \"right_vision\") {\n              console.log(patientInfo[patientID])\n              var tempData = patientInfo[patientID][\"vision\"]\n              var searchWord = \"LEFT\"\n              if (tempCategory === \"right_vision\") {\n                searchWord = \"RIGHT\"\n              }\n              for (var index = 0; index < tempData.length; index++) {\n                var tempVision = tempData[index]\n                if (tempVision.name.search(searchWord) !== -1) {\n                  text.push(tempVision.date.substring(0, 16) + \": \" + tempVision.value)\n                  text.push(<br />);\n                }\n              }\n            }\n            else if (isDict(tempValue)) {\n              for (var key in tempValue) {\n                if (tempValue[key] == null) {\n                  text.push(key);\n                } else {\n                  text.push(key + \" (\" + tempValue[key].substring(0, 16) + \")\"); // e.g. key is the diagnosis, and tempValue[key] displays the date\n                }\n                text.push(<br />);\n              }\n            }\n            else if (isArray(tempValue)) {\n              for (var index = 0; index < tempValue.length; index++) {\n                if (index % 4 === 3) {\n                  text.push(tempValue[index])\n                  text.push(<br />);\n                }\n                else if (index === tempValue.length - 1) {\n                  text.push(tempValue[index])\n                }\n                else {\n                  text.push(tempValue[index] + \", \")\n                }\n              }\n            }\n            else {\n              text = tempValue;\n            }\n            value[\"type\"] = \"string\";\n            value[\"text\"] = text;\n            tempPatientInfo.push(value);\n          }\n        }\n      }\n      tableData.push(tempPatientInfo);\n    }\n\n    console.log(\"tableData\", tableData)\n\n    if (tableData.length === 0) {\n      return (\n        nullTable\n      )\n    }\n\n    return (\n      <TableList\n        key={this.state.tableKey}\n        columns={categoryTitles}\n        rows={tableData}\n      ></TableList>\n    );\n  }\n\n  //If the category filter pressed doesn't exist (first if), then push to selectedFilterCategories, otherwise remain the same\n  categoryFilterPressed(e) {\n    let category = e.target.title;\n    if (this.state.selectedFilterCategories.indexOf(category) === -1) {\n      this.state.selectedFilterCategories.push(category);\n      this.setState({\n        selectedFilterCategories: this.state.selectedFilterCategories,\n        tableKey: this.state.tableKey + 1\n      });\n    } else {\n      var new_list = this.state.selectedFilterCategories.filter(function (name) {\n        return name !== category;\n      });\n      this.setState({\n        selectedFilterCategories: new_list,\n        tableKey: this.state.tableKey + 1\n      });\n    }\n  }\n\n  //When the back button is pressed, jump to the original filter page while maintaing additionalInfo (stuff relating to the filters the user submitted, retaining \"memory\")\n  backButtonPressed() {\n    let newState = {\n      page: \"FilterPage\",\n      additionalInfo: this.props.additionalInfo\n    };\n    this.props.changePage(newState);\n  }\n\n  //When the see all exams button is pressed, jump to the exams page while maintaining the info from patients page and filter page\n  examsPagePressed() {\n    var tempPageStatus = this.props.pageStatus;\n    tempPageStatus[\"ExamsPage\"] = {\n      patientsIDs: this.state.patientsIDs\n    };\n    let newState = {\n      page: \"ExamsPage\",\n      pageStatus: tempPageStatus\n    };\n    this.props.changePage(newState);\n  }\n\n  //used in the getExport() function to set the state of \"exportPressed\"\n  exportAllImagesPressed() {\n    this.setState({\n      exportPressed: {\n        display: !this.state.exportPressed.display\n      }\n    });\n  }\n\n  //If the cateogry is pressed, then if it was not already pressed, set state to true. Otherwise also set state to true.\n  exportCategoryPressed(e) {\n    let category = e.target.title;\n    if (this.state.exportPressed[category]) {\n      this.setState({\n        exportPressed: {\n          [category]: !this.state.exportPressed.display,\n          display: true\n        }\n      });\n    } else {\n      this.setState({\n        exportPressed: {\n          [category]: true,\n          display: true\n        }\n      });\n    }\n  }\n\n  exportImagesPressed() {\n    //code for exporting all images\n    return null;\n  }\n\n  //If the export button is pressed, then display the checkboxes with patient ID, diagnosis, image procedure; otherwise, don't display those\n  getExport() {\n    if (!this.state.exportPressed.display) {\n      return (\n        <CustomButton\n          style={styles.buttonUpperExport}\n          onClick={() => this.exportAllImagesPressed()}\n        >\n          EXPORT ALL IMAGES\n        </CustomButton>\n      );\n    }\n    return (\n      <div>\n        <CustomButton\n          style={styles.buttonUpperExport}\n          onClick={() => this.exportAllImagesPressed()}\n        >\n          EXPORT ALL IMAGES\n        </CustomButton>\n        <div style={styles.exportDropdownPressed}>\n          <div>\n            <input\n              type=\"checkbox\"\n              title={\"by Patient ID\"}\n              onChange={e => this.exportCategoryPressed(e)}\n            />\n            by Patient ID\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              title={\"by diagnosis\"}\n              onChange={e => this.exportCategoryPressed(e)}\n            />\n            by diagnosis\n          </div>\n          <div>\n            <input\n              type=\"checkbox\"\n              title={\"by image procedure\"}\n              onChange={e => this.exportCategoryPressed(e)}\n            />\n            by image procedure\n          </div>\n        </div>\n        <CustomButton\n          style={styles.buttonUpperExport}\n          onClick={() => this.exportImagesPressed()}\n        >\n          EXPORT IMAGES\n        </CustomButton>\n      </div>\n    );\n  }\n\n  //template function that creates legend\n  createLegend(json) {\n    var legend = [];\n    for (var i = 0; i < json[\"names\"].length; i++) {\n      var type = \"fa fa-circle text-\" + json[\"types\"][i];\n      legend.push(<i className={type} key={i} />);\n      legend.push(\" \");\n      legend.push(json[\"names\"][i]);\n    }\n    return legend;\n  }\n\n  //returns a text of chosen filters to display above table\n  getFilterSummary() {\n    var selectedFilters = this.props.pageStatus.FilterPage;\n    var text = [];\n    text.push(<b>You have selected these filters:</b>);\n    text.push(<br />);\n    for (var key in selectedFilters) {\n      var title = key;\n      var tempText = \": \";\n      var tempArray = selectedFilters[key]\n      if (isDict(tempArray)) {\n        tempArray = Object.keys(tempArray)\n      }\n      for (var index = 0; index < tempArray.length; index++) {\n        if (index !== 0) {\n          tempText += \", \";\n        }\n        if (isDict(selectedFilters[key])) {\n          tempText += tempArray[index] + \": \" + selectedFilters[key][tempArray[index]]\n        }\n        else {\n          tempText += tempArray[index];\n        }\n      }\n      text.push(\n        <b>\n          <u>{title}</u>\n        </b>\n      );\n      text.push(tempText);\n      text.push(<br />);\n    }\n    return text;\n  }\n\n  //render displays what is shown on the webpage\n  render() {\n    console.log(\"state\", this.state);\n    var filterSummary = this.getFilterSummary();\n    var all_filters = this.getFilters();\n    var exportButton = this.getExport();\n    var table = this.getTable();\n    return (\n      <div style={styles.container}>\n        <Grid fluid>\n          <Row style={styles.titleStyle}>\n            <Col style={styles.titleText}>\n              <div>Your Patient Cohort</div>\n            </Col>\n          </Row>\n\n          <Row style={styles.summaryStyle}>\n            <Col style={styles.summaryText}>\n              <div>{filterSummary}</div>\n            </Col>\n          </Row>\n\n          <Row>\n            <Col sm={3} style={styles.sideDivStyle}>\n              <Row>\n                <CustomButton style={styles.buttonDivShow}>\n                  {\" \"}\n                  Shown{\" \"}\n                </CustomButton>\n                <CustomButton style={styles.buttonDivHide}>\n                  {\" \"}\n                  Hidden{\" \"}\n                </CustomButton>\n              </Row>\n              <Row>{all_filters}</Row>\n            </Col>\n            <Col sm={9} style={styles.mainDivStyle}>\n              <Grid fluid>\n                <Row>\n                  <div style={styles.tableStyle}>{table}</div>\n                  <div style={styles.displayedMessageStyle}>\n                    {this.state.displayedMessage}\n                  </div>\n                  <div style={styles.underMainStyle}>\n                    <CustomButton\n                      style={styles.buttonUpperSubmit}\n                      onClick={() => this.backButtonPressed()}\n                    >\n                      BACK TO FILTERS PAGE\n                    </CustomButton>\n                    <CustomButton\n                      style={styles.buttonUpperReset}\n                      onClick={() => this.examsPagePressed()}\n                    >\n                      GO TO EXAMS PAGE\n                    </CustomButton>\n                    {exportButton}\n                  </div>\n                </Row>\n              </Grid>\n            </Col>\n          </Row>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default PatientsPage;\n\nconst styles = {\n  titleStyle: {\n    height: \"10vh\"\n  },\n  titleText: {\n    display: \"flex\",\n    \"align-items\": \"center\",\n    \"justify-content\": \"center\",\n    \"font-weight\": \"bold\",\n    \"font-size\": \"30px\"\n  },\n  summaryStyle: {\n    \"margin-bottom\": \"2vh\"\n  },\n  summaryText: {\n    display: \"flex\",\n    \"align-items\": \"flex-start\",\n    \"justify-content\": \"center\",\n    \"margin-bottom\": \"2.1vh\"\n  },\n  buttonDiv: {\n    width: \"100%\",\n    margin: \"1vh\",\n    \"background-color\": \"white\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  buttonDivPressed: {\n    width: \"100%\",\n    margin: \"1vh\",\n    \"background-color\": \"#78deec\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  buttonDivHide: {\n    width: \"45%\",\n    \"margin-top\": \"1vh\",\n    \"margin-bottom\": \"1vh\",\n    \"margin-left\": \"2vh\",\n    \"background-color\": \"white\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  buttonDivShow: {\n    width: \"45%\",\n    margin: \"1vh\",\n    \"background-color\": \"#78deec\",\n    color: \"black\",\n    border: \"solid 2px black\"\n  },\n  mainDivCategoryStyle: {\n    height: \"20vh\",\n    overflow: \"scroll\",\n    border: \"solid 2px black\",\n    margin: \"1vh\"\n  },\n  mainDivButtonTitle: {\n    display: \"flex\",\n    \"justify-content\": \"center\",\n    \"font-weight\": \"bold\",\n    \"text-decoration\": \"underline\"\n  },\n  underMainStyle: {\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n    \"justify-content\": \"flex-end\",\n    \"align-items\": \"flex-end\",\n    \"padding-right\": \"2vh\"\n  },\n  buttonUpperSubmit: {\n    width: \"40vh\",\n    color: \"black\",\n    border: \"solid 2px black\",\n    \"font-weight\": \"bold\",\n    \"background-color\": \"#eef27c\"\n  },\n  buttonUpperReset: {\n    width: \"40vh\",\n    color: \"black\",\n    border: \"solid 2px black\",\n    \"font-weight\": \"bold\",\n    \"background-color\": \"#eef27c\",\n    \"margin-top\": \"1vh\"\n  },\n  buttonUpperExport: {\n    width: \"40vh\",\n    color: \"black\",\n    border: \"solid 2px black\",\n    \"font-weight\": \"bold\",\n    \"background-color\": \"#eef27c\",\n    \"margin-top\": \"1vh\",\n    \"margin-bottom\": \"1vh\"\n  },\n  displayedMessageStyle: {\n    display: \"flex\",\n    \"justify-content\": \"flex-start\",\n    color: \"black\",\n    \"font-size\": \"16px\",\n    \"font-weight\": \"bold\",\n    \"margin-left\": \"3%\"\n  }\n};\n"]},"metadata":{},"sourceType":"module"}